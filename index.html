<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Викторина AQ</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: var(--tg-theme-bg-color, #fff);
            color: var(--tg-theme-text-color, #000);
            padding: 20px;
        }
        .quiz-container {
            max-width: 600px;
            margin: 0 auto;
        }
        .question {
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 10px;
            background-color: var(--tg-theme-secondary-bg-color, #f5f5f5);
        }
        h3 { margin-top: 0; }
        .options label {
            display: block;
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
        }
        .options input[type="radio"] {
            margin-right: 10px;
        }
        button {
            width: 100%;
            padding: 15px;
            background-color: var(--tg-theme-button-color, #3390ec);
            color: var(--tg-theme-button-text-color, #fff);
            border: none;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 20px;
        }
        #result {
            display: none;
            text-align: center;
            font-size: 18px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="quiz-container" id="quiz">
        <h1>Викторина #AQИнструмент</h1>
        
        <div class="question">
            <h3>1. Техника «Заземление 5-4-3-2-1». Что нужно найти первым (цифра 5)?</h3>
            <div class="options">
                <label><input type="radio" name="q1" value="0"> 5 вещей, которые можно потрогать</label>
                <label><input type="radio" name="q1" value="1"> 5 вещей, которые вы видите</label>
                <label><input type="radio" name="q1" value="0"> 5 звуков, которые слышите</label>
            </div>
        </div>

        <div class="question">
            <h3>2. Для чего нужен инструмент «Mad, Sad, Glad»?</h3>
            <div class="options">
                <label><input type="radio" name="q2" value="0"> Для оценки KPI</label>
                <label><input type="radio" name="q2" value="1"> Для выявления эмоций в команде</label>
                <label><input type="radio" name="q2" value="0"> Для планирования бюджета</label>
            </div>
        </div>

        <div class="question">
            <h3>3. На что отвечает «Stop» в инструменте «Start, Stop, Continue»?</h3>
            <div class="options">
                <label><input type="radio" name="q3" value="1"> Что мешает и что нужно исключить</label>
                <label><input type="radio" name="q3" value="0"> Где нужно отдохнуть</label>
                <label><input type="radio" name="q3" value="0"> Кого уволить</label>
            </div>
        </div>

        <button onclick="checkAnswers()">Узнать результат</button>
    </div>

    <div id="result">
        <h2>Ваш результат: <span id="score">0</span> из 3</h2>
        <p id="message"></p>
        <button onclick="Telegram.WebApp.close()">Закрыть</button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand(); // Раскрыть на весь экран

        function checkAnswers() {
            let score = 0;
            const answers = { q1: '1', q2: '1', q3: '1' };
            
            const q1 = document.querySelector('input[name="q1"]:checked');
            const q2 = document.querySelector('input[name="q2"]:checked');
            const q3 = document.querySelector('input[name="q3"]:checked');

            if (q1 && q1.value === answers.q1) score++;
            if (q2 && q2.value === answers.q2) score++;
            if (q3 && q3.value === answers.q3) score++;

            document.getElementById('quiz').style.display = 'none';
            document.getElementById('result').style.display = 'block';
            document.getElementById('score').innerText = score;

            const msg = score === 3 ? "Отлично! Вы мастер AQ!" : "Неплохо, но стоит перечитать рубрику!";
            document.getElementById('message').innerText = msg;
            
            // Отправка данных боту (опционально)
            tg.sendData(JSON.stringify({score: score}));
        }
    </script>
</body>
</html>
